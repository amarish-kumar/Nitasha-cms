@model Media
@using NITASA.Data
@using NITASA.Helpers
@using NITASA.Areas.Admin.Helper
@{
    ViewBag.Title = "Medias";
    List<Media> MediaList = ViewBag.MediaList;
}
@section PageLevelStyles{
    @*<link href="@Url.Content("~/Areas/Admin/assets/css/jquery-ui-1.10.4.custom.min.css")" rel="stylesheet" type="text/css" />*@
}
@section BottomScript{
    <script src="@Url.Content("~/Areas/Admin/assets/js/jquery-ui-1.10.4.custom.min.js")" type="text/javascript"></script>
}
<div class="main-content">
    <div class="container-fluid padded">
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success">
                <button class="close" data-dismiss="alert" type="button">
                    ×
                </button>
                @TempData["SuccessMessage"]
            </div>
        }
        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-error">
                <button class="close" data-dismiss="alert" type="button">
                    ×
                </button>
                @TempData["ErrorMessage"]
            </div>
        }
        <div class="row-fluid">
            <div class="span12">
                <div class="box">
                    <div class="box-header">
                        <span class="title">Upload Media</span>
                    </div>
                    <div class="box-content">
                        <div class="padded">
                            @if (UserRights.HasRights(Rights.AddNewMedias))
                            {
                                using (Html.BeginForm("Add", "Media", FormMethod.Post, new { @enctype = "multipart/form-data" }))
                                {
                                    <div class="span4">
                                        <div class="control-group" style="margin-bottom: 0px">
                                            <label class="control-label" style="text-align: left;">
                                                Upload Media
                                            </label>
                                            <div class="controls">
                                                <input type="file" name="FileName" id="FileName" data-val-required="Please select media"
                                                       data-val="true" />
                                                <div style="color: red;">
                                                    <span id="nav-url-error" data-valmsg-replace="true" data-valmsg-for="FileName" class="field-validation-valid">
                                                    </span>
                                                </div>
                                                (Only .jpg, .bmp, .jpeg, .png, .gif, .mp4 files are allowed.)
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span4">
                                        <div class="control-group">
                                            <label class="control-label" style="text-align: left;">
                                                Media Attribute
                                            </label>
                                            <div class="controls">
                                                @Html.TextBoxFor(m => m.Attribute)
                                                <div style="color: red">
                                                    @Html.ValidationMessageFor(m => m.Attribute)
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="span4">
                                        <div class="control-group">
                                            <label class="control-label" style="text-align: left;">
                                                &nbsp;
                                            </label>
                                            <div class="controls">
                                                @Html.CheckBoxFor(m => m.ShowOnGallaryPage, new { id = "sogp" })
                                                <label for="sogp" style="display: inline">
                                                    Show On Gallary Page
                                                </label>
                                            </div>
                                        </div>
                                    </div>*@
                                    <div class="span6">
                                        <div class="control-group">
                                            <label class="control-label" style="text-align: left;">
                                            </label>
                                            <div class="controls">
                                                <input type="submit" value="Upload Media" class="btn btn-blue" />
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                            <div class="clear">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box">
                    <div class="box-header">
                        <span class="title">Media List</span>
                    </div>
                    <div class="box-content">
                        <div class="padded">
                            @for (int i = 0; i < MediaList.Count(); i++)
                            {
                                <div class="media-thumb">
                                    @if (UserRights.HasRights(Rights.DeleteMedias))
                                    {
                                        <div class="rem-media">
                                            @Html.ActionLink("X", "Delete", new { GUID = MediaList[i].GUID }, new { onclick = "return confirm('Are you sure you want to delete this media?');" })
                                    </div>
                                    }
                                    <img src='/content/media/@MediaList[i].FileName' alt='' style="width:100px;height:100px;" />
                                </div>
                            }
                            <div class="clear">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $("#Attribute").autocomplete({
            source: '@Url.Action("MediaAttribute", "Media")',
            minLength: 1
        });
    });
</script>
